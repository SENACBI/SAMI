<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="/template.xhtml">

        <ui:define name="title">HISTORIAL</ui:define>        

        <ui:define name="body">

            <h2>Nueva Búsqueda</h2>

            <form>

                <p:panelGrid columns="3">


                    <Label>Número de Cédula</Label>
                    <input type="text" jsf:id="numeroDoc" jsf:required="true"
                           jsf:requiredMessage="El campo Número de Cédula es obligatorio"
                           jsf:value="#{historialController.usuarioActual.numeroDoc}">
                        <f:ajax execute="@this" render="numeroDocMessage"/>
                    </input>
                    <h:message id="numeroDocMessage" for="numeroDoc" styleClass="error"/>

                    <label>Fecha de Servicio</label>
                    <input type="date" jsf:id="fechaServicio" jsf:required="true"
                           jsf:requiredMessage="Por favor ingrese su Fecha de servicio:"
                           jsf:value="#{historialController.historialActual.fechaServicio}">
                        <f:convertDateTime pattern="yyyy-MM-d"/>
                        <f:ajax execute="@this" render="fechaServicioMessage"/>
                    </input>
                    <h:message id="fechaServicioMessage" for="fechaServicio" styleClass="error"/>

                    <Label>Ubicación</Label>
                    <input type="text" jsf:id="ubicacionServicioPrestadoInputText" jsf:required="true"
                           jsf:requiredMessage="Por favor ingrese la ubicacion: Utilice letras y números"
                           jsf:value="#{historialController.historialActual.ubicacionServicioPrestado}">
                        <f:validateRegex pattern="[a-zA-Z 0-9áéíóúÁÉÍÓÚÑñ]*"/>
                        <f:ajax execute="@this" render="ubicacionServicioPrestadoMessage"/>
                    </input>
                    <h:message id="ubicacionServicioPrestadoMessage" for="ubicacionServicioPrestadoInputText" styleClass="error"/>
                </p:panelGrid>

                <p:panelGrid columns="2">

                    <h:outputLabel value="Tipo de Servicio:" for="nombre_servicio" />
                    <h:selectOneMenu id="nombre_servicio" value="#{historialController.historialActual}" title="Nombre_Servicio" >
                        <f:selectItem itemLabel="Seleccione uno..."/>
                        <f:selectItems value="#{historialController.listTipoDeServicios}"/>
                    </h:selectOneMenu>

                </p:panelGrid>

                <p:button value="Iniciar Busqueda" outcome="List" />
                <p:commandButton value="Guardar Busqueda" action="#{historialController.addSolicitudServicios()}" />

                <p:button value="Cancelar" outcome="/modulo2/index_modulo2.xhtml"/>

                <p:button value="Inicio" outcome="/index"/>

            </form>

        </ui:define>
    </ui:composition>
</html>